<html>
<body>
<div>
    <button type="button" class="btn" onclick="drawOriginalFigure()">Initial form</button>
</div>
<div>
    <input type="range" min="0" max="7" step="1" value="0" oninput="makeNextStep(this.value)"
           onchange="makeNextStep(this.value)">
</div>
<canvas id="canvas" width="500" height="500"></canvas>
<script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    drawBorderLines();

    function drawBorderLines() {
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(500, 0);
        ctx.lineTo(500, 500);
        ctx.lineTo(0, 500);
        ctx.closePath();
        ctx.stroke();
    }

    function drawOriginalFigure() {
        ctx.fillStyle = "#1bbc9c";
        drawFigure();
        drawBorderLines();
    }

    function drawFigure() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(0, 500);
        ctx.lineTo(350, 500);
        ctx.lineTo(350, 350);
        ctx.lineTo(250, 350);
        ctx.lineTo(250, 150);
        ctx.lineTo(500, 150);
        ctx.lineTo(500, 0);
        ctx.lineTo(0, 0);
        ctx.closePath();
        ctx.fill();
    }

    function makeNextStep(step = 0, color = null) {
        let getColor = false;
        if (step > 0) {
            if (color) {
                getColor = true;
            }
            step--;
            ctx.save();
            ctx.transform(0.5, 0, 0, 0.5, 0, 0);
            if (!getColor) {
                color = "#ffe700";
            }
            ctx.fillStyle = color;
            makeNextStep(step, color);
            ctx.restore();
            ctx.save();
            ctx.transform(0.5, 0, 0, -0.5, 250, 250);
            if (!getColor) {
                color = "#002fd7";
            }
            ctx.fillStyle = color;
            makeNextStep(step, color);
            ctx.restore();
            ctx.save();
            ctx.transform(0.5, 0, 0, 0.5, 250, 250);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.restore();
            ctx.save();
            ctx.transform(0.25, 0, 0, 0.25, 250, 375);
            if (!getColor) {
                color = "#ff0000";
            }
            ctx.fillStyle = color;
            makeNextStep(step, color);
            ctx.restore();
            ctx.save();
            ctx.transform(-0.5, 0, 0, 0.5, 250, 250);
            if (!getColor) {
                color = "#065403";
            }
            ctx.fillStyle = color;
            makeNextStep(step, color);
            ctx.restore();
        } else {
            drawFigure();
        }
    }
</script>
</body>
</html>
